{"ast":null,"code":"export default {\n  name: \"File\",\n  data() {\n    return {\n      tableData: [],\n      filename: \"\",\n      multipleSelection: []\n    };\n  },\n  created() {},\n  methods: {\n    loadPage() {\n      // 2.使用 axios 请求后端数据\n      this.request.get(\"/file/page\", {\n        params: {\n          pageIndex: this.pageIndex,\n          pageSize: this.pageSize,\n          filename: this.filename\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.records;\n        this.total = res.total;\n      });\n    },\n    handleSizeChange(pageSize) {\n      console.log(`每页 ${pageSize} 条`);\n      this.pageSize = pageSize;\n      this.loadPage(); //分页加载数据\n    },\n\n    handleCurrentChange(pageIndex) {\n      console.log(`当前页: ${pageIndex}`);\n      this.pageIndex = pageIndex;\n      this.loadPage(); //分页加载数据\n    },\n\n    reset() {\n      //重置按钮\n      this.filename = \"\";\n      this.loadPage();\n    },\n    handleAdd() {\n      //新增用户按钮\n      this.dialogFormVisible = true;\n      this.form = {}; //置空form表单\n    },\n\n    savaFile() {\n      //新增用户\n      this.request.post(\"/file\", this.form).then(res => {\n        if (res) {\n          this.$message.success(\"保存成功！\");\n          this.loadPage();\n        } else this.$message.error(\"保存失败！\");\n      });\n      this.dialogFormVisible = false;\n    },\n    handleEdit(row) {\n      //编辑用户\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    handleDelete(id) {\n      //删除用户\n      this.request.delete(\"/file/\" + id).then(res => {\n        if (res) {\n          this.$message.success(\"删除成功！\");\n          this.loadPage();\n        } else this.$message.error(\"删除失败！\");\n      });\n    },\n    handleSelectionChange(val) {\n      //复选框选择事件\n      this.multipleSelection = val;\n    },\n    handleBatchDelete() {\n      //批量删除\n      let ids = this.multipleSelection.map(v => v.id); //将对象数组 取出属性数组[1,2,3..]\n      this.request.post(\"/file/del/batch\", ids).then(res => {\n        if (res) {\n          this.$message.success(\"批量删除成功！\");\n          this.pageIndex = 1;\n          this.loadPage();\n        } else this.$message.error(\"批量删除失败！\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","filename","multipleSelection","created","methods","loadPage","request","get","params","pageIndex","pageSize","then","res","console","log","records","total","handleSizeChange","handleCurrentChange","reset","handleAdd","dialogFormVisible","form","savaFile","post","$message","success","error","handleEdit","row","handleDelete","id","delete","handleSelectionChange","val","handleBatchDelete","ids","map","v"],"sources":["src/views/File.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!--搜索框-->\r\n        <div style=\"padding: 10px 0;\">\r\n            <el-input style=\"width: 200px;\" placeholder=\"请输入文件名称\" suffix-icon=\"el-icon-search\" v-model=\"filename\" ></el-input>\r\n            <el-button class=\"ml-5\" type=\"primary\" @click=\"loadPage\">搜索</el-button>\r\n            <el-button  type=\"warning\" @click=\"reset\">重置</el-button>\r\n        </div>\r\n\r\n        <!--新增-->\r\n        <div style=\"margin: 10px 0\">\r\n            <el-upload name=\"multipartFile\" action=\"http://localhost:9090/file/upload\" :on-success=\"handleFileUploadSuccess\" :limit=\"1\" :show-file-list=\"false\" accept=\"xlsx\" style=\"display: inline-block\">\r\n                <el-button type=\"primary\" class=\"ml-5\">导入 <i class=\"el-icon-download\"></i></el-button>\r\n            </el-upload>\r\n            <el-popconfirm class=\"ml-5\" confirm-button-text='确定' cancel-button-text='我再想想' icon=\"el-icon-info\" icon-color=\"red\" title=\"确定删除吗？\" @confirm=\"handleBatchDelete\">\r\n                <el-button type=\"danger\" slot=\"reference\">批量删除 <i class=\"el-icon-remove-outline\"></i></el-button>\r\n            </el-popconfirm>\r\n        </div>\r\n\r\n        <!-- 主体部分：表格数据 -->\r\n        <el-table :data=\"tableData\" border stripe header-cell-class-name=\"tableHeaderBg\" @selection-change=\"handleSelectionChange\">\r\n            <!--复选框-->\r\n            <el-table-column type=\"selection\" width=\"45\"></el-table-column>\r\n            <!--每行数据-->\r\n            <el-table-column prop=\"id\" label=\"编号\" width=\"60\"></el-table-column>\r\n            <el-table-column prop=\"name\" label=\"文件名称\" width=\"120\"></el-table-column>\r\n            <el-table-column prop=\"type\" label=\"文件类型\"></el-table-column>\r\n            <el-table-column prop=\"size\" label=\"文件大小(kb)\"></el-table-column>\r\n            <el-table-column prop=\"url\" label=\"下载\"></el-table-column>\r\n            <el-table-column prop=\"enable\" label=\"启用\"></el-table-column>\r\n            <el-table-column prop=\"op\" label=\"操作\" width=\"250\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button type=\"success\" @click=\"handleEdit(scope.row)\">编辑 <i class=\"el-icon-edit-outline\"></i></el-button>\r\n                    <el-popconfirm class=\"ml-5\" confirm-button-text='确定' cancel-button-text='我再想想'\r\n                                   icon=\"el-icon-info\" icon-color=\"red\" title=\"确定删除吗？\" @confirm=\"handleDelete(scope.row.id)\">\r\n                        <el-button type=\"danger\" slot=\"reference\">删除 <i class=\"el-icon-delete\"></i></el-button>\r\n                    </el-popconfirm>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"File\",\r\n        data(){\r\n            return {\r\n                tableData: [],\r\n                filename: \"\",\r\n                multipleSelection: [],\r\n            }\r\n        },\r\n        created() {\r\n\r\n        },\r\n        methods:{\r\n            loadPage(){\r\n                // 2.使用 axios 请求后端数据\r\n                this.request.get(\"/file/page\",{\r\n                    params: {\r\n                        pageIndex: this.pageIndex,\r\n                        pageSize: this.pageSize,\r\n                        filename: this.filename\r\n                    }\r\n                }).then(res => {\r\n                    console.log(res);\r\n                    this.tableData = res.records;\r\n                    this.total = res.total;\r\n                });\r\n            },\r\n            handleSizeChange(pageSize){\r\n                console.log(`每页 ${pageSize} 条`);\r\n                this.pageSize = pageSize;\r\n                this.loadPage();//分页加载数据\r\n            },\r\n            handleCurrentChange(pageIndex){\r\n                console.log(`当前页: ${pageIndex}`);\r\n                this.pageIndex = pageIndex;\r\n                this.loadPage();//分页加载数据\r\n            },\r\n            reset(){//重置按钮\r\n                this.filename = \"\";\r\n                this.loadPage();\r\n            },\r\n            handleAdd(){//新增用户按钮\r\n                this.dialogFormVisible =  true;\r\n                this.form = {};//置空form表单\r\n            },\r\n            savaFile(){//新增用户\r\n                this.request.post(\"/file\",this.form).then(res => {\r\n                    if(res){\r\n                        this.$message.success(\"保存成功！\");\r\n                        this.loadPage();\r\n                    }\r\n                    else this.$message.error(\"保存失败！\");\r\n                });\r\n                this.dialogFormVisible =  false;\r\n            },\r\n            handleEdit(row){//编辑用户\r\n                this.form = row;\r\n                this.dialogFormVisible = true;\r\n            },\r\n            handleDelete(id){//删除用户\r\n                this.request.delete(\"/file/\"+id).then(res => {\r\n                    if(res){\r\n                        this.$message.success(\"删除成功！\");\r\n                        this.loadPage();\r\n                    }\r\n                    else this.$message.error(\"删除失败！\");\r\n                });\r\n            },\r\n            handleSelectionChange(val){//复选框选择事件\r\n                this.multipleSelection = val;\r\n            },\r\n            handleBatchDelete(){//批量删除\r\n                let ids = this.multipleSelection.map(v => v.id);//将对象数组 取出属性数组[1,2,3..]\r\n                this.request.post(\"/file/del/batch\",ids).then(res => {\r\n                    if(res){\r\n                        this.$message.success(\"批量删除成功！\");\r\n                        this.pageIndex=1;\r\n                        this.loadPage();\r\n                    }\r\n                    else this.$message.error(\"批量删除失败！\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AA4CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,QAAA;MACAC,iBAAA;IACA;EACA;EACAC,QAAA,GAEA;EACAC,OAAA;IACAC,SAAA;MACA;MACA,KAAAC,OAAA,CAAAC,GAAA;QACAC,MAAA;UACAC,SAAA,OAAAA,SAAA;UACAC,QAAA,OAAAA,QAAA;UACAT,QAAA,OAAAA;QACA;MACA,GAAAU,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,KAAAZ,SAAA,GAAAY,GAAA,CAAAG,OAAA;QACA,KAAAC,KAAA,GAAAJ,GAAA,CAAAI,KAAA;MACA;IACA;IACAC,iBAAAP,QAAA;MACAG,OAAA,CAAAC,GAAA,OAAAJ,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;MACA,KAAAL,QAAA;IACA;;IACAa,oBAAAT,SAAA;MACAI,OAAA,CAAAC,GAAA,SAAAL,SAAA;MACA,KAAAA,SAAA,GAAAA,SAAA;MACA,KAAAJ,QAAA;IACA;;IACAc,MAAA;MAAA;MACA,KAAAlB,QAAA;MACA,KAAAI,QAAA;IACA;IACAe,UAAA;MAAA;MACA,KAAAC,iBAAA;MACA,KAAAC,IAAA;IACA;;IACAC,SAAA;MAAA;MACA,KAAAjB,OAAA,CAAAkB,IAAA,eAAAF,IAAA,EAAAX,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA;UACA,KAAAa,QAAA,CAAAC,OAAA;UACA,KAAArB,QAAA;QACA,OACA,KAAAoB,QAAA,CAAAE,KAAA;MACA;MACA,KAAAN,iBAAA;IACA;IACAO,WAAAC,GAAA;MAAA;MACA,KAAAP,IAAA,GAAAO,GAAA;MACA,KAAAR,iBAAA;IACA;IACAS,aAAAC,EAAA;MAAA;MACA,KAAAzB,OAAA,CAAA0B,MAAA,YAAAD,EAAA,EAAApB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA;UACA,KAAAa,QAAA,CAAAC,OAAA;UACA,KAAArB,QAAA;QACA,OACA,KAAAoB,QAAA,CAAAE,KAAA;MACA;IACA;IACAM,sBAAAC,GAAA;MAAA;MACA,KAAAhC,iBAAA,GAAAgC,GAAA;IACA;IACAC,kBAAA;MAAA;MACA,IAAAC,GAAA,QAAAlC,iBAAA,CAAAmC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAP,EAAA;MACA,KAAAzB,OAAA,CAAAkB,IAAA,oBAAAY,GAAA,EAAAzB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA;UACA,KAAAa,QAAA,CAAAC,OAAA;UACA,KAAAjB,SAAA;UACA,KAAAJ,QAAA;QACA,OACA,KAAAoB,QAAA,CAAAE,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}